<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>敏捷开发指导思想 | 个人主页</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="@[TOC](敏捷开发指导思想)">
<meta name="keywords" content="开发,思维">
<meta property="og:type" content="article">
<meta property="og:title" content="敏捷开发指导思想">
<meta property="og:url" content="https://myblong.zkb/2019/07/24/share/开发的指导思想/index.html">
<meta property="og:site_name" content="个人主页">
<meta property="og:description" content="@[TOC](敏捷开发指导思想)">
<meta property="og:updated_time" content="2019-07-24T15:15:02.279Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="敏捷开发指导思想">
<meta name="twitter:description" content="@[TOC](敏捷开发指导思想)">
  
    <link rel="alternate" href="/atom.xml" title="个人主页" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/plugin/bganimation/bg.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <div class="outer">
        <div class="widget-wrap mobile-header">
  <h3 class="widget-title"></h3>
  <div class="widget">
    <img class="avatar" src="https://avatars0.githubusercontent.com/u/20333903?v=3&amp;s=460">
    <h2 class="author">左康波</h2>
    <h3 class="description">业余文艺cg场景模型师</h3>
    <div class="count-box">
      <a href="/archives"><div><strong>27</strong><br>文章</div></a>
      <a href="/categories"><div><strong>8</strong><br>分类</div></a>
      <a href="/tags"><div><strong>24</strong><br>标签</div></a>
    </div>
    <ul class="blog-link">
     
          <a href="/" title="Home">
            <li>主页</li>
          </a>
        
          <a href="/archives" title="Archives">
            <li>归档</li>
          </a>
        
          <a href="/categories" title="Categories">
            <li>分类</li>
          </a>
        
          <a href="/tags" title="Tags">
            <li>标签</li>
          </a>
        
    </ul>
  </div>
</div>

        <section id="main"><article id="post-share/开发的指导思想" class="wow slideInRight article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/07/24/share/开发的指导思想/" class="article-date">
  <time class="post-time" datetime="2019-07-24T14:42:50.152Z" itemprop="datePublished">
    <span class="post-month">7月</span><br/>
    <span class="post-day">24</span>
  </time>
</a>
   
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      敏捷开发指导思想
    </h1>
  

        <div>
          
          
              
  &nbsp; | &nbsp;
  <div class="view-box">
    <span id="/2019/07/24/share/开发的指导思想/" class="leancloud_visitors" data-flag-title="敏捷开发指导思想">
      &nbsp;阅读次数<span class="leancloud-visitors-count"></span>
    </span>
  </div>


          
        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <pre><code>@[TOC](敏捷开发指导思想)
</code></pre><a id="more"></a>

<div class="show-content-free">
            <h1>敏捷概述</h1>
<h2>背景</h2>
<blockquote>
<p>敏捷开发最早被提出应用于软件开发管理流程中。随着时代发展，软件规模和复杂度激增，需求变化加快，软件开发过程日益“重型化”，因此轻量级的，更能适应变化的敏捷软件开发方法被普遍认可并迅速发展流行。</p>
</blockquote>
<h2>敏捷宣言（原则）</h2>
<blockquote>
<p>个体和交互 胜过 过程和工具<br>
可以工作的软件 胜过 面面俱到的文档<br>
客户合作 胜过 合同谈判<br>
响应变化 胜过 遵循计划</p>
</blockquote>
<hr>
<h1>认识敏捷</h1>
<blockquote>
<p>统一认识：敏捷=理念（敏捷核心思想）<em>优秀实践（敏捷的经验积累）</em>具体应用（结合自身，灵活应用）</p>
</blockquote>
<h2>理念</h2>
<ol>
<li>
<h4>聚焦客户（视觉）价值（Value），消除浪费</h4>
<ul>
<li>部分完成但没最终落地的工作。</li>
<li>开发完成但没有被客户应用的特性。</li>
<li>人员流动导致经验不能累计，重复学习。</li>
<li>移交导致信息丢失。</li>
<li>任务切换（研究表明多任务工作会导致效率下降20%-40%）。</li>
<li>因任务或资源互相依赖而导致工作停滞。</li>
<li>缺陷，解决缺陷本身就是浪费，而且缺陷越遗留到后面浪费越大。</li>
</ul>
</li>
<li>
<h4>激发团队（Team）潜能，加强协作</h4>
<ul>
<li>
<strong>激发团队</strong>
<ul>
<li>通过目标牵引团队自主工作</li>
<li>当团队自管理时效率最高</li>
<li>当团队成员不被打扰时，工作效率最高</li>
<li>当团队解决自我问题时，提升最快</li>
<li>团队成员共同参与计划制定、任务安排，关注团队目标、共担责任</li>
<li>人们对自己做出的承诺比别人要求的更认真</li>
<li>人们会尽力做到最好</li>
<li>在强大的压力下努力工作，会自然降低对质量的要求</li>
</ul>
</li>
<li>
<strong>沟通协作</strong>
<ul>
<li>广泛的面对面的交流是团队工作高效的方式</li>
<li>白板沟通 优于 电话沟通 优于 邮件沟通 优于 文档、录制的音视频</li>
</ul>
</li>
</ul>
</li>
<li>
<h4>不断调整以适应（Adapting）变化</h4>
<ul>
<li>
<strong>适应变化</strong>
<ul>
<li>认清“客户是逐步发现真正的需求”。</li>
<li>小批量快速交付是关键。</li>
<li>通过迭代计划不断调整以适应需求变化</li>
</ul>
</li>
<li>
<strong>应持续保持良好的架构</strong>
<ul>
<li>良好的架构是适应变化的基石
<ol>
<li>软件开发特点是内容庞大、内容持续增长、持续周期长，因此需要良好的架构来保证长期的演进</li>
<li>优秀的架构通过可扩展性来很好的适应需求的变化，对敏捷起到支持作用，相反拙劣的架构会阻碍敏捷</li>
<li>良好架构有助于定制合适的增量开发/集成计划，使分层分级的可持续集成更加容易</li>
</ol>
</li>
<li>架构需要尽早验证和持续维护
<ol>
<li>通过迭代来实现和验证架构，有利于架构的尽早稳定</li>
<li>特殊效果表现需识别影响架构的需求，优先实现，规避架构风险</li>
<li>通过重构及时维护和优化架构，使架构保持生命力</li>
</ol>
</li>
<li>利用多层次的反馈不断调整以逼近目标</li>
</ul>
</li>
</ul>
</li>
</ol>
<h2>实践</h2>
<ol>
<li>
<h4>因地制宜选择合适的敏捷实践</h4>
</li>
<li>
<h4>敏捷团队(SCRUM)</h4>
<ul>
<li>
<p><strong>产品负责人ProductOwner（PO）</strong>-产品经理/游戏策划/导演</p>
<ul>
<li><blockquote>
<p>负责产品，代表相关的利益</p>
</blockquote></li>
<li><p>提供愿景</p></li>
<li><p>代表利益相关人（如观众、Marketing、管理者等），对产品投资回报负责</p></li>
<li><p>确定产品发布计划</p></li>
<li><p>定义产品并确定优先级</p></li>
<li><p>验收迭代结果.并根据验收结果和需求变化刷新需求清单和优先级</p></li>
</ul>
</li>
<li>
<p><strong>SCRUM主管Scrum Master（SM）：</strong></p>
<ul>
<li><blockquote>
<p>确保Scurm正确使用和收益最大化，但是不做决定（不命令和控制Team）</p>
</blockquote></li>
<li><p>辅导团队正确应用敏捷实践</p></li>
<li><p>引导团队建立并遵守規则</p></li>
<li><p>保护团队不受打扰</p></li>
<li><p>推动解决团队遇到的障碍</p></li>
<li><p>激励团队</p></li>
</ul>
</li>
<li>
<p><strong>开发团队（Team）：</strong></p>
<ul>
<li><blockquote>
<p>负责自我管理开发产品的人组成的跨职能团队</p>
</blockquote></li>
<li><p>负责估计工作量并根据自身能力找出最佳方案完成任务且保证交付质重</p></li>
<li><p>向OP和利益相关人演示工作成果</p></li>
<li><p>团队自我管理、持续改进</p></li>
</ul>
</li>
</ul>
</li>
<li>
<h4>工作件</h4>
<ul>
<li>
<strong>产品Backlog（需求清单）</strong>
<ul>
<li>什么是产品Backlog
<ul>
<li>经过优先级排序的动态刷新的产品需求清单，用来制定发布计划和迭代计划。</li>
</ul>
</li>
<li>产品Blocklog的好处
<ul>
<li>通过需求的动态管理应对变化，避免浪费;</li>
<li>易于优先交付对用户价值高的需求。</li>
</ul>
</li>
<li>产品Blocklog关键要点
<ul>
<li>清楚表述列表中每个需求任务对用户带来的价值，做为优先级排序的重要参考；</li>
<li>动态的需求管理而非"冻结"方式，PO持续地管理和及时刷新需求清单，在每轮迭代前，都要重新筛选出高优先级需求进入本轮迭代；</li>
<li>迭代的需求分析过程，而非一次性分析清楚所有需求（只对近期迭代要做的需求进行详细分析，其它需求停留在粗粒度）</li>
<li>[图片上传失败...(image-e6b495-1543726686826)]</li>
</ul>
</li>
</ul>
</li>
<li>
<strong>迭代Backlog</strong>
<ul>
<li>什么是迭代
<ul>
<li>迭代Backlog是团队在一轮迭代中的"任务"（Task）清单，是团队的详细迭代开发计划；</li>
<li>当团队接收从产品Blocklog挑选出要在本轮迭代实现的需求时，召开团队迭代计划会议，将需求转化为具体的"任务"；</li>
<li>每项任务信息包括当前剩余工作量和贲任人。</li>
</ul>
</li>
<li>好处
<ul>
<li>将需求分解成更细小的任务，利于对迭代内进度进行精确控制；</li>
<li>剩余工作量可用来实时跟踪团队当前进展。</li>
</ul>
</li>
<li>关键要点
<ul>
<li>'任务"由团队成员自己分解和定义，而不是上级指派，支撑需求完成的所有工作都可以列为任务；</li>
<li>任务要落实到具体的贲任人；</li>
<li>任务粒度要小，工作量大于两天的任务要进一步分解；</li>
<li>用小时做为任务剩余工作量的估计单位，并每日重估计和刷新。</li>
</ul>
</li>
</ul>
</li>
<li>
<strong>完成标准</strong>
<ul>
<li>什么的完成标准
<ul>
<li>基于"随时可向用户发布"的目标制定衡量团队工作是否已完成的标准，由团队和PO形成共识；</li>
</ul>
</li>
<li>好处
<ul>
<li>共同协商的完成标准是团队的自我承诺，团队会更认真；</li>
<li>用于准确评估团队工作进展；</li>
<li>清晰和明确的完成标准保证了每次迭代是高质量的。</li>
</ul>
</li>
<li>关键要点
<ul>
<li>团队自协商：团队根掮项目实际情况来定义完成标准，并严格遵守；</li>
<li>有层次：一般分为三个层次：Story级别，迭代级和发布级，每个级别都有各自的完成标准。</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<h4>管理实践</h4>
<ul>
<li>
<strong>Sprint计划会议</strong>
<ul>
<li>什么是计划会议
<ul>
<li>每轮迭代启动前，团队共同讨论本轮迭代详细开发计划的过程，输入是产品Backlog，输出是团队迭代Backlog</li>
<li>多团队迭代计划会议要分层召开
<ol>
<li>版本迭代计划会议：将产品Backlog (需求）分配给团队；</li>
<li>团队迭代计划会议：将选取的产品Backlog需求转换成迭代Backlog〔任务），分配给团队成员；</li>
</ol>
</li>
<li>迭代计划会议内容：
<ol>
<li>澄清需求、对"完成标准"达成一致</li>
<li>工作量估计、根据团队能力确定本轮迭代交付内容；</li>
<li>细化、分配迭代任务和初始工作计划。</li>
<li>[图片上传失败...(image-445853-1543726686826)]</li>
</ol>
</li>
</ul>
</li>
<li>好处
<ul>
<li>通过充分讨论，使团队成员对任务和完成标准理解一致；</li>
<li>团队共同参与，促进团队成员更认真对待自己的承偌。</li>
</ul>
</li>
<li>要点
<ul>
<li>充分参与：SM确保PO和Team充分参与讨论，达成理解一致；</li>
<li>相互承诺：Team承诺完成迭代Backlog中的需求并这到"完成标准”，PO承诺在短迭代周期不增加需求〔2-4周）；</li>
<li>确定内部任务：Team和PO办商把一些内部任务放入迭代中（例如重构、持续集成环境搭建4等），由PO考虑并与其他外部需求一起排序。</li>
</ul>
</li>
</ul>
</li>
<li>
<strong>每日站会</strong>
<ul>
<li>什么是站会
<ul>
<li>每日工作前，团队成员的例行沟通机制，由SM组织，Team成员全体站立参加</li>
<li>聚焦在下面的三个主题：
<ol>
<li>我昨天为本项目做了什么？</li>
<li>我计划今天为本项目做什么？</li>
<li>我需要什么帮助以更高效的工作？</li>
</ol>
</li>
</ul>
</li>
<li>好处
<ul>
<li>增加团队凝聚力，产生积极的工作氛围</li>
<li>及时黍露风险和问题；</li>
<li>促进团队内成员的沟通和协调。</li>
</ul>
</li>
<li>要点
<ul>
<li>准时开始：按计划会议制定的时间地点开会，形成团队成员的自然习惯；</li>
<li>高效会议：会议限时15分钟，每个人都保持站立，依次发言，不讨论与会议三个主题无关的事情〔如技术解决方案等）；</li>
<li>问题跟踪：SM应该记录下所有的问题并跟踪解决；</li>
</ul>
</li>
</ul>
</li>
<li>
<strong>迭代验收（评审会议）</strong>
<ul>
<li>由SM组织，PO和用户代表（外部或内部利益相关人）负责验收、Team负责演示</li>
</ul>
</li>
<li>
<strong>回顾会议</strong>
<ul>
<li>什么是回顾会议
<ul>
<li>在每轮迭代结束后举行的会议，目的是分享好的经验和发现改逬点，促进团队不断进步；</li>
<li>围绕如下三个问题：
<ol>
<li>本次迭代有哪些做得好</li>
<li>本次迭代我们在哪些方面还能做得更好</li>
<li>我们在下次迭代准备在哪些方面改进？</li>
</ol>
</li>
</ul>
</li>
<li>好处
<ul>
<li>激励团队成员；</li>
<li>帮助团队挖掘优秀经验并继承;</li>
<li>避免团队犯重复的错误；</li>
<li>营造团队自主改进的氛围。</li>
</ul>
</li>
<li>要点
<ul>
<li>会议气氛：Team全员参加，气氛宽松自由，畅所欲言，头脑风暴发现问题，共同分析根因；</li>
<li>关注重点：Team共同讨论优先级，将精力放在最需要的地方（关注几个改进就够了）；</li>
<li>会议结论要跟踪闭环：可以放入迭代Backlog中。</li>
</ul>
</li>
</ul>
</li>
<li>
<strong>可视化管理</strong>
<ul>
<li>项目跟踪
<ul>
<li>To Do</li>
<li>Doing</li>
<li>Done</li>
<li>Finished</li>
</ul>
</li>
<li>故事看板[图片上传失败...(image-dd8ce4-1543726686826)]</li>
</ul>
</li>
</ul>
</li>
<li>
<h4>技术实践</h4>
</li>
</ol>
<h2>敏捷特点：简单、高效</h2>
<ul>
<li>所有人对项目的成功负责</li>
<li>所有人由需求驱动工作，需求一旦确定，就不应该修改了</li>
<li>所有人都需要跨领域的工作</li>
<li>持续交付、迭代前进</li>
<li>小步前进、持续改进</li>
</ul>
<hr>
<h1>首次实施敏捷的步骤</h1>
<ol>
<li>思想动员</li>
<li>差距分析</li>
<li>环境和工具准备</li>
<li>敏捷实践技能准备，技术能力准备</li>
<li>确定开发模型和拟应用实践</li>
<li>敏捷实施</li>
<li>回顾评估与调整改进</li>
<li>激励表彰</li>
<li>项目结束总结</li>
</ol>

          </div>



<!-- 来必力City版安装代码 -->
<div id="lv-container" data-id="city" data-uid="MTAyMC80NTQ2Ny8yMTk3OQ==">
	<script type="text/javascript">
   (function(d, s) {
       var j, e = d.getElementsByTagName(s)[0];

       if (typeof LivereTower === 'function') { return; }

       j = d.createElement(s);
       j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
       j.async = true;

       e.parentNode.insertBefore(j, e);
   })(document, 'script');
	</script>
<noscript> 为正常使用来必力评论功能请激活JavaScript</noscript>
</div>
<!-- City版安装代码已完成 -->


      
    </div>
    <footer class="article-footer">
      <a data-url="https://myblong.zkb/2019/07/24/share/开发的指导思想/" data-id="cjyiukwy6002mv4sdomuy2bfd" class="article-share-link">Partager</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/开发/">开发</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/思维/">思维</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2019/07/25/share/mari猫的皮肤纹理绘制/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Récent</strong>
      <div class="article-nav-title">
        
          mari4.5猫的皮肤纹理绘制
        
      </div>
    </a>
  
  
    <a href="/2019/07/21/为什么恋爱越来越难/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Ancien</strong>
      <div class="article-nav-title">为什么现在越来越感觉恋爱越困难了</div>
    </a>
  
</nav>

  
</article>




  <div id="comments" class="comments">
    <div id="uyan_frame"></div>
  </div>
<script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid=true"></script>
</section>
        
          <aside id="sidebar">
  
    <div class="widget-wrap">
  <h3 class="widget-title"></h3>
  <div class="widget">
    <h1 class="blog-title">个人主页</h1>
    <h2 class="blog-subtitle">愿我的只言片语，为你的成长带来帮助！</h2>
    <ul class="blog-link">
     
          <a href="/" title="Home">
            <li>主页</li>
          </a>
        
          <a href="/archives" title="Archives">
            <li>归档</li>
          </a>
        
          <a href="/categories" title="Categories">
            <li>分类</li>
          </a>
        
          <a href="/tags" title="Tags">
            <li>标签</li>
          </a>
        
    </ul>
  </div>
</div>

  
    <div class="widget-wrap">
  <h3 class="widget-title"></h3>
  <div class="widget">
    <img class="avatar" src="https://avatars0.githubusercontent.com/u/20333903?v=3&amp;s=460">
    <h2 class="author">左康波</h2>
    <h3 class="description">业余文艺cg场景模型师</h3>
    <div class="count-box">
      <a href="/archives"><div><strong>27</strong><br>文章</div></a>
      <a href="/categories"><div><strong>8</strong><br>分类</div></a>
      <a href="/tags"><div><strong>24</strong><br>标签</div></a>
    </div>



    <div class="social-link">
      
        <a class="hvr-bounce-in" href="https://space.bilibili.com/17963985" target="_blank" title="bilibili">
          bilibili
        </a>
      
    </div>

    <div class="friend-link">
      <h2>其他链接</h2>
      
        <a class="hvr-bounce-in" href="null" target="_blank" title="ShanaMaid">
          ShanaMaid
        </a>
      
    </div>
  </div>
</div>

  
</aside>
        
      </div>
      <footer id="footer">


   <link rel="stylesheet" href="/live2d/css/live2d.css" />
    <div id="landlord">
        <div class="message" style="opacity:0"></div>
        <canvas id="live2d" width="280" height="250" class="live2d"></canvas>
        <div class="hide-button">隐藏</div>
    </div>
    <script type="text/javascript" src="https://cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
    <script type="text/javascript">
        var message_Path = '/live2d/'
        var home_Path = 'https://haremu.com/'
    </script>
    <script type="text/javascript" src="/live2d/js/live2d.js"></script>
    <script type="text/javascript" src="/live2d/js/message.js"></script>
    <script type="text/javascript">
        loadlive2d("live2d", "/live2d/model/tia/model.json");
    </script>

  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy;2018 - 2019 左康波<br>
      由强力驱动 | 
      主题
      
        |<script src="http://s11.cnzz.com/z_stat.php?id=1234&web_id=1234" language="JavaScript"></script>
      
    </div>
    
  </div>


</footer>
    </div>
    

<script src="//apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="//apps.bdimg.com/libs/wow/0.1.6/wow.min.js"></script>
<script>
new WOW().init();
</script>   


  <link rel="stylesheet" href="/plugin/fancybox/jquery.fancybox.css">
  <script src="/plugin/fancybox/jquery.fancybox.pack.js"></script>



  <link rel="stylesheet" href="/plugin/galmenu/GalMenu.css">
  <script src="/plugin/galmenu/GalMenu.js"></script>
  <div class="GalMenu GalDropDown">
      <div class="circle" id="gal">
        <div class="ring">
          
            <a href="/" title="" class="menuItem">首页</a>
          
            <a href="/tags" title="" class="menuItem">标签</a>
          
            <a href="/categories" title="" class="menuItem">分类</a>
          
            <a href="/archives" title="" class="menuItem">归档</a>
          
            <a href="/xxxxxxxxx" title="" class="menuItem">简历</a>
          
            <a href="/xxxxxxx" title="" class="menuItem">搜索</a>
          
        </div>
        
          <audio id="audio" src="#"></audio>
        
      </div> 
</div>
<div id="overlay" style="opacity: 1; cursor: pointer;"></div>
  <script type="text/javascript">var items = document.querySelectorAll('.menuItem');
    for (var i = 0,
    l = items.length; i < l; i++) {
      items[i].style.left = (50 - 35 * Math.cos( - 0.5 * Math.PI - 2 * (1 / l) * i * Math.PI)).toFixed(4) + "%";
      items[i].style.top = (50 + 35 * Math.sin( - 0.5 * Math.PI - 2 * (1 / l) * i * Math.PI)).toFixed(4) + "%"
    }</script>
<script type="text/javascript">
  $(document).ready(function() {
    $('body').GalMenu({
      'menu': 'GalDropDown'
    })
  });
</script>

  <section class="hidden-xs"> 
  <ul class="cb-slideshow"> 
    <li><span>苟利</span></li> 
    <li><span>国家</span></li> 
    <li><span>生死以</span></li> 
    <li><span>岂能</span></li> 
    <li><span>祸福</span></li> 
    <li><span>趋避之</span></li> 
  </ul>
</section>
<script src="/js/script.js"></script>




  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("null", "null");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.article-title').length > 1) {
        showTime(Counter);
      }
    });
  </script>





  </div>
</body>
</html>